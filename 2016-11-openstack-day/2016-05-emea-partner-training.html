<!doctype html>
<html lang="en">

  <head>
    <meta charset="utf-8">

    <title>EMEA Training OpenStack</title>

    <meta name="author" content="Piotr Wachowicz" />

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <link rel="stylesheet" href="css/reveal.css">
    
    <!-- For syntax highlighting -->
    <link rel="stylesheet" href="css/zenburn.css">
    <link rel="stylesheet" href="css/openstack.css" id="theme">
    
    <!-- If the query includes 'print-pdf', include the PDF print sheet -->
    <script>
      var link = document.createElement('link');
      link.rel = 'stylesheet';
      link.type = 'text/css';
      link.href =
        window.location.search.match(/print-pdf/gi) ? 'css/print/pdf.css' :
          'css/print/paper.css';
      document.getElementsByTagName('head')[0].appendChild(link);
    </script>

    <!--script src="js/head.min.js"></script>
    <script src="js/reveal.js"></script>
    <script src="js/this.js"></script-->
  </head>
<body>

  <div class="reveal"><div class="slides">



    <section data-transition="zoom">
    <img src="img/openstack1.png"/>
    </section>
  
    <section data-transition="zoom">
      <h1>Bright OpenStack</h1>
      <p><i>Piotr Wachowicz</i></p>
      <p>Cloud integration lead</p>
      <p>www.brightcomputing.com</p>
    </section>
    

    <section data-transition="zoom">
    <h2>Agenda (4 hours, 4 items)</h2>
      <lu>
        <li>Slides: Bright OpenStack 101</li>
        <li>Hand-on: Deploying Bright OpenStack</li>
        <li>Practical: Managing Bright OpenStack</li>
        <li>Slides: Cluster-as-a-service</li>
      </lu>
    </section>

    <section>
    <h2>Goals - understand:</h2>
      <lu>
        <li>OpenStack & Ceph</li>
        <li>Bright OpenStack Reference Architecture</li>
      </lu>
    </section>

    <section data-transition="appear">
      <img width="90%" src="img/openstack-architecture-1.png"/>
    </section>


    <section data-transition="zoom">
    <h1>Part 1 - Bright OpenStack 101</h1>
    </section>
    
    <section>
    <h2>OpenStack & cloud</h2>
      <lu>     
        <li>But, why ...?</li>
        <lu>
          <li>Why clouds?</li>
          <li>Why OpenStack cloud?</li>
          <li>Why Bright OpenStack cloud?</li>
        </lu>
        <li>Intro to OpenStack</li>
        <li>OpenStack Architecture</li>
        <li>Ceph</li>
        <li>Bright OpenStack Architecture</li>
      </lu>
    </section>


<section data-transition="zoom">
<h1>Clouds</h1>
</section>

    
<section data-transition="zoom">
<img src="img/generic-clouds0.jpg"/>
</section>

    <section>
      <h2> Why cloud?</h2>
      <lu>
        <li> Sharing physical HW resources (lower costs) </li>
        <li>Virtualized resources (saved time)</li>
        <li>Easy prototyping of ideas (creativity)</li>
        <li>People can focus on innovation, not reinventing the wheel (productivity)</li>
      </lu>
    </section>
    
<section>
<h2> Why cloud cont.?</h2>
<p style="text-align:left">
example: Research team has a cool idea.</li>
</p>


<lu>
<li class="fragment">Traditionally (no cloud involved):</li>
<li class="fragment">hardware, networking , switches, VLANs, Firewall, Test, debug, test, debug, test, debug...</li>
<li class="fragment">Weeks later</li>
<li class="fragment">Start the research</li>
<li class="fragment">NOT OPTIMAL</li>
<li class="fragment">With OpenStack -> Log in to the cloud's web interfaces. Request desired resources. Wait few minutes. Start the research</li>
</lu>


<p style="text-align:left">
    </section>


<section  data-transition="zoom">
<h1>OpenStack Clouds</h1>

  
<img width=20% src="img/openstack1.png"/>
</section>

    
<section>
<h2>Why OpenStack clouds?</h2>
<lu>
<li class="fragment">Open Source, “Linux for the Cloud”</li>
<li class="fragment">It has the most momentum</li>
<li class="fragment">Most mature, most active deployments (CERN LHC)</li>
<li class="fragment">Both Private and Public clouds, or mix of both (hybrid)</li>
<li class="fragment">Community support</li>
<li class="fragment">Thousands of active contributors</li>
<li class="fragment">Thriving community</li>
<li class="fragment">Vendor support: (Dell, Cisco, HP, Red Hat, Cisco, Linux Foundation, Oracle, Huawei, NEC, AT&T, and many more)</li>
<li class="fragment">Hardware support (customizable backends)</li>
</lu>
</section>


<section>
<h2>What is OpenStack?</h2>
<div class="fragment">
Collection of building blocks
</div>
</section>

<section>
<h2>Bulding blocks</h2>
<lu>
<li>Each with it's own REST API</li>
<li>Each offering certain functionality (storage, processing, ...)</li>
<li>Working together</li>
</lu>
</section>



<section data-transition="zoom">
<img width="90%" src="img/openstack-architecture0.png"/>
</section>

<section data-transition="zoom">
<img width="90%" src="img/openstack-big-tent.png"/>
</section>


<section data-transition="zoom">
<h1>Sounds cool! Let me try!</h1>
</section>

<section data-transition="zoom">
<h1>Not so fast!</h1>
</section>


<section data-transition="zoom">
<img width="90%" src="img/happy-cloud.jpg"/>
</section>

<section data-transition="zoom">
<h1>OpenStack is the mother ...</h1>
</section>

<section data-transition="zoom">
<h1>.. of all learning curves</h1>
</section>

<section data-transition="zoom">
<img width="90%" src="img/mushroom-cloud.jpg"/>
</section>

<section data-transition="zoom">
<img width="90%" src="img/mushroom-cloud2.jpg"/>
</section>

<section data-transition="zoom">
<img width="90%" src="img/openstack-engineer2.jpg"/>
</section>


<section>
<h2>What OpenStack NOT?</h2>
<lu>
<li class="fragment">Not a initial deployment tool</li>
<li class="fragment">Not the entire ecosystem around the “OpenStack” part</li>
<li class="fragment">Not deploying, managing and monitoring hardware</li>
<li class="fragment">No robust data storage system</li>
<li class="fragment">No auxiliary third-party services needed by OpenStack are included (HAProxy, AMQP, Databases, etc). They need to be installed separately</li>
<li class="fragment">Not easy... where to start?</li>

<li class="fragment">All of those make OpenStack very hard for administrators to deploy and to manage.</li>

</lu>
</section>




<section data-transition="zoom">
<h1>Bright OpenStack Clouds</h1>
</section>

<section>
<h2>Bright OpenStack</h2>

<p>Bright OpenStack – Cloud + everything else you need</p>
<lu>
<li>OpenStack service (Nova, Glance, Neutron, Keystone ...)</li>
<li>Auxiliary services:</li>
<lu>
  <li>HAProxy, AMQP</li>
  <li>Galera, Ceph</li>
</lu>

<li>hardware/software cluster management</li>
<li>Robust Deployment mechanism</li>
<li>monitoring (metrics/healthchecks)</li>
<li>Hardware agnostic</li>
</lu>
</section>


<section>
<h2>Why Bright OpenStack?</h2>
<lu>
<li>Easy, but customizable</li>
<li>Complete package</li>
<li>monitoring (metrics/healthchecks)</li>
<li>Hardware agnostic</li>
</lu>
</section>


<section data-transition="zoom">
<h1>Using OpenStack by end-users</h1>
</section>

<section data-transition="zoom">
<img width="70%" src="img/login-openstack-dashboard.jpg"/>
</section>

<section data-transition="zoom">
<img width="70%" src="img/horizon-generic.png"/>
</section>


<section>
<h2>Horizon - self-provisioning portal</h2>
user can create/manage:
<lu>
<li>Networks (L2 broadcast domain)</li>
<li>Subnets (L3 IP subnets)</li>
<li>Routers (connect subnets)</li>
<li>VM Images (ISO, QCOW, RAW, ...)</li>
<li>Servers (VMs)  (start/stop/view status)</li>
<li>Volumes (aux. storage)</li>
<li>Stacks</li>
<li>Firewalls</li>
<li>Security groups</li>
</lu>
</section>



<section data-transition="zoom">
<h1>OpenStack Architecture</h1>
</section>

<section data-transition="zoom">
<img src="img/openstack-architecture0.png"/>
</section>


  
<section>
<h2>OpenStack core services</h2>
<lu>
<li>Horizon: Dashboard (user access)</li>
<li>Keystone: identity (Auth*)</li>
<li>Nova: compute (VMs)</li>
<li>Glance: image store (for VMs)</li>
<li>Cinder: block devices (for VMs)</li>
<li>Neutron: networking (for VMs/containers)</li>
<li>Heat: orchestration (of infra)</li>
</lu>
</section>

<section data-transition="zoom">
<img width="90%" src="img/openstack-architecture1.jpg"/>
</section>



<section>
<h2>OpenStack core services</h2>
<lu>
<li>Services talk externally via HTTP APIs</li>
<li>Services have multiple parts (e.g. nova-api, nova-scheduler, nova-conductor, nova-compute)</li>
<li>Internally those parts use AMQP for communication</li>
<li>3 nodes classes: Controller, Network, Hypervisor nodes</li>
<li>Different nodes classes run different parts of services</li>
<li>e.g. nova-compute on Hypervisors, and all other nova-* on Controllers </li>
</lu>
</section>


<section data-transition="zoom">
<img width="90%" src="img/openstack-architecture2.jpg"/>
</section>

<section>
<h2>Example: compute (Nova)</h2>
<lu>
<li>nova-api</li>
<li>nova-scheduler</li>
<li>nova-compute</li>
<li>nova-conductor</li>
<li>nova-novncproxy</li>
</lu>
</section>

<section>
<h2>Counter Example: auth (keystone)</h2>
<lu>
<li>Keystone</li>
</lu>
</section>


<section>
<h2> Example: networking (Neutron) </h2>
<lu>
<li>neutron-server</li>
<li>dhcp-agent</li>
<li>l2-agent:</li>
<lu>
<li>linuxbridge-agent</li>
<li>ovs-agent</li>
</lu>
</section>


<section>
<h2>OpenStack Aux software</h2>
<lu>
<li>MySQL (galera)</li>
<li>AMQP (RabbitMQ)</li>
<li>HAProxy</li>
<li>ELK</li>
</lu>
</section>


<section>
<h2>OpenStack Node Types</h2>
<lu>
<li>Controller nodes  (api-endpoint, and logic)</li>
<li>Hypervisor (compute) nodes</li>
<li>Network nodes</li>
</lu>
</section>


<section>
<h2>OpenStack Networking</h2>
Tenants (users) want isolated and secure networks
<lu>
<li>VXLANs</li>
<li>VLANs</li>
</lu>
</section>

<section>
<h2>OpenStack Routers</h2>
<lu>
<li>CVR</li>
<li>DVR</li>
</lu>
</section>



<section data-transition="zoom">
<h1>Example - creating a VM</h1>
<p>how it all ties together</p>
</section>

<section>
<h2>Example (1/2)</h2>
<lu>
<li class="fragment">User (client) wants to create a VM</li>
<li class="fragment">Client authenticates against keystone's API</li>
<li class="fragment">Obtain a token for a specific project</li>
<li class="fragment">Uses token to ask nova-api for a vm</li>
<li class="fragment">Nova-api verifies token against keystone's API</li>
<li class="fragment">Nova-api forwards the request to nova-scheduler</li>
<li class="fragment">Nova-scheduler picks a host (filters, weights)</li>
<li class="fragment">...</li>
</lu>
</section>



<section>
<h2>Example (2/2)</h2>
<lu>
<li  class="fragment">...</li>

<li class="fragment">Nova-scheduler picks a host (filters, weights)</li>
<li class="fragment">Nova-scheduler ask nova-compute on that host to boot vm</li>
<li class="fragment">Nova-compute asks Cinder for a volume</li>
<li class="fragment">Nova-compute asks Neutron for networking</li>
<li class="fragment">Nova-compute spins up a VM</li>
<li class="fragment">Nova-compute asks nova-conductor to update the DB</li>
<li class="fragment">VM starts</li>
</lu>
</section>




<section data-transition="zoom">
<h1>Using OpenStack</h1>
</section>






<section data-transition="zoom">
<h1>cloud-admins</h1>
</section>

<section data-transition="zoom">
<img  width="90%" src="img/cmgui-vs-dashboard.png"/>
</section>


















<section data-transition="zoom">
<h1>Ceph</h1>
</section>


<section data-transition="zoom">
<img width="80%" src="img/ceph-logo.jpg"/>
</section>


<section>
<h2>What is Ceph?</h2>
<lu>
<li>Distributed storage solution</li>
<li>Scalable</li>
<li>Reliable (automatic replication/balancing)</li>
<li>Open Source</li>
<li>Reliable (CERN/LHC)</li>
<li>Scalable (Petabytes)</li>
<li>Commodity hardware</li>
</lu>
</section>


<section>
<img width="50%" src="img/ceph-architecture.png"/>
</section>


<section>
<img width="50%" src="img/ceph-crush-placement.png"/>
</section>

<section>
<img width="80%" src="img/ceph-architecture-storage.jpg"/>
</section>

<section>
<img width="80%" src="img/ceph-elements.png"/>
</section>

<section>
<img width="50%" src="img/openstack-plus-ceph.png"/>
</section>


<section>
<h2>OpenStack + Ceph?</h2>
<lu>
<li>used for Cinder (volumes)</li>
<li>used for Nova (ephemeral)</li>
<li>used for Glance (images)</li>
<li>used as Swift replacement (object via Rados Gateway)</li>
</lu>
</section>

<section data-transition="zoom">
<img width="90%" src="img/openstack-plus-ceph-diagram.jpg"/>
</section>




<section>
<h2>Ceph and data replication</h2>
<lu>
<li>Client wants to write data</li>
<li>Retrieves cluster map from monitor</li>
<li>Hash the data, CRUSH, determine OSD</li>
<li>Write to OSD</li>
<li>OSD replicates</li>
<li>Write operation returns</li>
</lu>
</section>


<section data-transition="zoom">
<img width="50%" src="img/ceph-replication.png"/>
</section>






<section data-transition="zoom">
<h1>Bright Reference Architecture</h1>
</section>



<section>
<h2>Bare minimum requirements</h2>

<p>2 nodes</p>
<lu>
<li>1 headnode</li>
<li>1 controller/compute/storage/networking</li>
</lu>
<p><br/>8GB RAM, 2 decent CPU cores</p>
</section>


<section>
<h2>Minimum reasonable</h2>
<lu>
<li>1 headnode</li>
<li>1 controller/networking</li>
<li>1-10 compute nodes</li>
<li>storage cluster</li>
</lu>
</section>

<section>
<h2>Minimum decent</h2>
<lu>
<li>1 headnode</li>
<li>3-5 controller/networking (HA) </li>
<li>1-50 compute nodes</li>
<li>storage cluster</li>
</lu>
</section>


<section>
<h2>Example: Krusty</h2>
<lu>
<li>1 headnode</li>
<li>1 network node</li>
<li>17 hypervisor nodes</li>
<li>3 controller nodes</li>
<li>7 Ceph OSD nodes (14 OSDs)</li>
</lu>
</section>


<section data-transition="appear">
<img width="90%" src="img/openstack-architecture-4.png"/>
</section>
<section data-transition="appear">
<img width="90%" src="img/openstack-architecture-3.png"/>
</section>
<section data-transition="appear">
<img width="80%" src="img/openstack-architecture-2.png"/>
</section>
<section data-transition="appear">
<img width="90%" src="img/openstack-architecture-1.png"/>
</section>





<section data-transition="zoom">
<h1>Let's recap</h1>
</section>

<section>
<h2>Recap: OpenStack</h2>
<lu>
<li>Clouds make sense...</li>
<li>...but only with the right tools</li>
<li>OpenStack is the cool kid, ... with some issue</li>
<li>... but Bright OpenStack solves typical OpenStack headaches</li>
</lu>
</section>

<section>
<h2>Recap: OpenStack</h2>
<lu>
<li>Collection of services</li>
<li>Keystone, Nova, Cinder, Glance, Heat, Neutron</li>
<li>Each offering a different function</li>
<li>Many other services in OpenStack ecosystem</li>
</lu>
</section>


<section>
<h2>Recap: Ceph</h2>
<lu>
<li>Distributed Object Storage system</li>
<li>Works great with OpenStack</li>
<li>But can be used standalone</li>
</lu>
</section>






<section>
<h1>Questions?</h1>
Thank you
</section>





<!-- CEPH -->


















    
  </div>

  <div class="footer">
    
  </div>

  <script src="js/head.min.js"></script>
  <script src="js/reveal.js"></script>

  <script src="js/this.js"></script>

  </body>
</html>


